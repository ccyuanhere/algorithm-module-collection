# Min-Maxå½’ä¸€åŒ–é¢„å¤„ç†å™¨

## ğŸ¯ ç®—æ³•æ¦‚è¿°

Min-Maxå½’ä¸€åŒ–æ˜¯ä¸€ç§å¸¸ç”¨çš„æ•°æ®é¢„å¤„ç†æŠ€æœ¯ï¼Œå°†æ•°æ®çº¿æ€§æ˜ å°„åˆ°æŒ‡å®šèŒƒå›´å†…ï¼ˆå¦‚[0,1]æˆ–[-1,1]ï¼‰ã€‚è¯¥ç®—æ³•é€šè¿‡çº¿æ€§å˜æ¢ä¿æŒæ•°æ®çš„ç›¸å¯¹å…³ç³»ä¸å˜ï¼Œæ˜¯æœºå™¨å­¦ä¹ å’Œä¿¡å·å¤„ç†ä¸­çš„åŸºç¡€é¢„å¤„ç†æ–¹æ³•ã€‚

**æ ¸å¿ƒå…¬å¼ï¼š**
```
X_norm = (X - X_min) / (X_max - X_min) * (target_max - target_min) + target_min
```

## ğŸ“ ç›®å½•ç»“æ„

```
preprocessor_min-max/
â”œâ”€â”€ run.py                      # ã€å¿…éœ€ã€‘æ ‡å‡†APIæ¥å£
â”œâ”€â”€ model.py                    # ã€å¿…éœ€ã€‘æ ¸å¿ƒç®—æ³•é€»è¾‘
â”œâ”€â”€ config.json                 # ã€å¿…éœ€ã€‘é»˜è®¤å‚æ•°é…ç½®
â”œâ”€â”€ meta.json                   # ã€å¿…éœ€ã€‘ç®—æ³•å…ƒä¿¡æ¯
â”œâ”€â”€ README.md                   # ã€å¿…éœ€ã€‘ä½¿ç”¨è¯´æ˜
â”œâ”€â”€ requirements.txt            # ã€å¿…éœ€ã€‘ä¾èµ–åˆ—è¡¨
â”œâ”€â”€ make.py                     # ã€å¯é€‰ã€‘æµ‹è¯•æ•°æ®ç”Ÿæˆè„šæœ¬
â””â”€â”€ data/                       # ã€å¿…éœ€ã€‘ç¤ºä¾‹æ•°æ®
    â””â”€â”€ example_input.npy       # è¾“å…¥ä¿¡å·æ ·æœ¬
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç”Ÿæˆæµ‹è¯•æ•°æ®

```bash
python make.py
```

### 2. è¿è¡Œç®—æ³•æµ‹è¯•

```bash
python run.py
```

å°†å±•ç¤ºè¯¦ç»†çš„å½’ä¸€åŒ–æ•ˆæœï¼ŒåŒ…æ‹¬ï¼š
- åŸå§‹ä¿¡å·ç»Ÿè®¡ä¿¡æ¯
- ä¸åŒç›®æ ‡èŒƒå›´çš„å½’ä¸€åŒ–ç»“æœå¯¹æ¯”
- é€†å˜æ¢ç²¾åº¦éªŒè¯
- ç”Ÿæˆå¯è§†åŒ–å¯¹æ¯”å›¾ç‰‡

## ğŸ“š APIæ¥å£

### æ ‡å‡†è°ƒç”¨æ¥å£

```python
from run import run

# è¾“å…¥æ•°æ®ç»“æ„
input_data = {
    "signal": np.ndarray,             # è¾“å…¥ä¿¡å·æ•°æ®ï¼ˆå¿…éœ€ï¼‰
    "normalization_range": tuple,     # å½’ä¸€åŒ–èŒƒå›´ï¼ˆå¯é€‰ï¼Œé»˜è®¤(0,1)ï¼‰
    "axis": int/tuple,               # å½’ä¸€åŒ–è½´ï¼ˆå¯é€‰ï¼ŒNoneä¸ºå…¨å±€ï¼‰
    "mode": str                      # è¿è¡Œæ¨¡å¼ï¼ˆå¿…éœ€ï¼‰
}

# è°ƒç”¨ç®—æ³•
result = run(input_data)
```

### è¾“å…¥å‚æ•°è¯¦è§£

| å‚æ•° | ç±»å‹ | è¯´æ˜ | é»˜è®¤å€¼ |
|------|------|------|--------|
| `signal` | `np.ndarray` | è¾“å…¥ä¿¡å·æ•°æ®ï¼Œæ”¯æŒå¤šç»´æ•°ç»„ | - |
| `normalization_range` | `tuple` | ç›®æ ‡èŒƒå›´ï¼Œå¦‚`(0,1)`, `(-1,1)` | `(0,1)` |
| `axis` | `int/tuple/None` | å½’ä¸€åŒ–è½´ï¼ŒNoneè¡¨ç¤ºå…¨å±€å½’ä¸€åŒ– | `None` |
| `mode` | `str` | è¿è¡Œæ¨¡å¼ï¼š`fit_transform`ã€`inverse_transform` | - |

### è¾“å‡ºç»“æœæ ¼å¼

```python
{
    "result": np.ndarray,        # å½’ä¸€åŒ–åçš„ä¿¡å·
    "metrics": dict,             # ç»Ÿè®¡ä¿¡æ¯å’Œå˜æ¢å‚æ•°
    "log": str,                 # è¯¦ç»†æ—¥å¿—ä¿¡æ¯
    "success": bool             # æ‰§è¡ŒçŠ¶æ€
}
```

## ğŸ”§ ä½¿ç”¨ç¤ºä¾‹

### åŸºæœ¬å½’ä¸€åŒ–

```python
import numpy as np
from run import run

# åŠ è½½æµ‹è¯•æ•°æ®
signal_data = np.load("data/example_input.npy")  # shape: (100, 2, 1000)

# å½’ä¸€åŒ–åˆ°[0,1]
input_data = {
    "signal": signal_data,
    "normalization_range": (0, 1),
    "mode": "fit_transform"
}
result = run(input_data)

print(f"åŸå§‹èŒƒå›´: [{signal_data.min():.4f}, {signal_data.max():.4f}]")
print(f"å½’ä¸€åŒ–å: [{result['result'].min():.4f}, {result['result'].max():.4f}]")
```

### ä¸åŒç›®æ ‡èŒƒå›´

```python
# å½’ä¸€åŒ–åˆ°[-1,1]
input_data = {
    "signal": signal_data,
    "normalization_range": (-1, 1),
    "mode": "fit_transform"
}
result = run(input_data)

# å½’ä¸€åŒ–åˆ°[0,10]
input_data = {
    "signal": signal_data,
    "normalization_range": (0, 10),
    "mode": "fit_transform"
}
result = run(input_data)
```

### é€†å˜æ¢æ¢å¤

```python
# å…ˆå½’ä¸€åŒ–
input_data = {
    "signal": signal_data,
    "normalization_range": (0, 1),
    "mode": "fit_transform"
}
normalized_result = run(input_data)

# é€†å˜æ¢æ¢å¤åŸå§‹æ•°æ®
input_data = {
    "signal": normalized_result['result'],
    "original_min": normalized_result['metrics']['original_min'],
    "original_max": normalized_result['metrics']['original_max'],
    "mode": "inverse_transform"
}
recovered_result = run(input_data)

# éªŒè¯æ¢å¤ç²¾åº¦
recovery_error = np.mean(np.abs(signal_data - recovered_result['result']))
print(f"æ¢å¤è¯¯å·®: {recovery_error:.8f}")
```

## ğŸ“Š å½’ä¸€åŒ–æ•ˆæœå±•ç¤º

### è¾“å…¥ä¿¡å·ç‰¹å¾
- **å¤šæ ·åŒ–ä¿¡å·ç±»å‹**: æ­£å¼¦æ³¢ã€çº¿æ€§è°ƒé¢‘ã€å™ªå£°ã€æ··åˆä¿¡å·
- **å¤šç§å¹…åº¦èŒƒå›´**: ä»å¾®å°å€¼(Â±0.001)åˆ°å¤§å€¼(Â±10000)
- **å¤šé€šé“æ”¯æŒ**: æ”¯æŒI/QåŒé€šé“æˆ–å¤šé€šé“ä¿¡å·

### å½’ä¸€åŒ–æ•ˆæœ

| åŸå§‹èŒƒå›´ | ç›®æ ‡èŒƒå›´ | å½’ä¸€åŒ–åèŒƒå›´ | ç²¾åº¦ |
|----------|----------|--------------|------|
| [-2543.2, 8712.5] | [0, 1] | [0.0000, 1.0000] | å®Œç¾ |
| [-0.0008, 0.0012] | [-1, 1] | [-1.0000, 1.0000] | å®Œç¾ |
| [1205.3, 9876.1] | [0, 10] | [0.0000, 10.0000] | å®Œç¾ |

### å˜æ¢å‚æ•°

ç®—æ³•è‡ªåŠ¨è®¡ç®—å¹¶è¿”å›å˜æ¢å‚æ•°ï¼š
- **original_min/max**: åŸå§‹æ•°æ®çš„æœ€å°/æœ€å¤§å€¼
- **scale_factor**: ç¼©æ”¾å› å­ = (target_max - target_min) / (original_max - original_min)
- **offset**: åç§»é‡ = target_min - original_min * scale_factor

## âš™ï¸ é…ç½®å‚æ•°

é€šè¿‡ä¿®æ”¹`config.json`è‡ªå®šä¹‰ç®—æ³•è¡Œä¸ºï¼š

```json
{
    "default_range": [0, 1],         # é»˜è®¤å½’ä¸€åŒ–èŒƒå›´
    "clip_outliers": false,          # æ˜¯å¦è£å‰ªå¼‚å¸¸å€¼
    "preserve_zero": false           # æ˜¯å¦ä¿æŒé›¶å€¼ä¸å˜
}
```

### å‚æ•°è¯´æ˜

- **default_range**: é»˜è®¤çš„å½’ä¸€åŒ–ç›®æ ‡èŒƒå›´ï¼Œå½“ç”¨æˆ·æœªæŒ‡å®šæ—¶ä½¿ç”¨
- **clip_outliers**: æ˜¯å¦åœ¨å½’ä¸€åŒ–å‰è£å‰ªå¼‚å¸¸å€¼ï¼Œå¯æé«˜é²æ£’æ€§  
- **preserve_zero**: æ˜¯å¦åœ¨å½’ä¸€åŒ–è¿‡ç¨‹ä¸­ä¿æŒé›¶å€¼çš„ç‰¹æ®Šä½ç½®
```

## ğŸ¨ ç®—æ³•ç‰¹ç‚¹

### âœ… ä¼˜åŠ¿
- **çº¿æ€§å˜æ¢**: ä¿æŒæ•°æ®ç›¸å¯¹å…³ç³»ä¸å˜
- **å®Œå…¨å¯é€†**: æ”¯æŒç²¾ç¡®çš„é€†å˜æ¢
- **å®æ—¶å¤„ç†**: è®¡ç®—å¤æ‚åº¦O(n)ï¼Œé€‚åˆå®æ—¶åº”ç”¨
- **å¤šç»´æ”¯æŒ**: å¤„ç†ä»»æ„ç»´åº¦çš„ä¿¡å·æ•°æ®
- **æ•°å€¼ç¨³å®š**: å¤„ç†è¾¹ç•Œæƒ…å†µï¼ˆå¦‚min=maxï¼‰

### âš ï¸ æ³¨æ„äº‹é¡¹
- å¯¹å¼‚å¸¸å€¼æ•æ„Ÿï¼Œæå€¼ä¼šå½±å“æ•´ä½“ç¼©æ”¾
- æ–°æ•°æ®åº”ä½¿ç”¨è®­ç»ƒæ•°æ®çš„å½’ä¸€åŒ–å‚æ•°
- æ•°æ®åˆ†å¸ƒå˜åŒ–æ—¶éœ€é‡æ–°è®¡ç®—å‚æ•°

## ğŸ“ˆ åº”ç”¨åœºæ™¯

1. **æœºå™¨å­¦ä¹ é¢„å¤„ç†**: ç»Ÿä¸€ç‰¹å¾é‡çº§ï¼ŒåŠ é€Ÿæ¨¡å‹æ”¶æ•›
2. **ä¿¡å·å¤„ç†**: å°†ä¿¡å·å¹…åº¦æ ‡å‡†åŒ–åˆ°ADCèŒƒå›´
3. **ç¥ç»ç½‘ç»œ**: æ¿€æ´»å‡½æ•°è¾“å…¥èŒƒå›´ä¼˜åŒ–
4. **æ•°æ®å¯è§†åŒ–**: æ˜ å°„æ•°æ®åˆ°æ˜¾ç¤ºåæ ‡ç³»
5. **é€šä¿¡ç³»ç»Ÿ**: ä¿¡å·åŠŸç‡å½’ä¸€åŒ–

## ğŸ” æŠ€æœ¯ç»†èŠ‚

### ç®—æ³•å¤æ‚åº¦
- **æ—¶é—´å¤æ‚åº¦**: O(n)ï¼Œå…¶ä¸­nä¸ºæ•°æ®ç‚¹æ•°é‡
- **ç©ºé—´å¤æ‚åº¦**: O(n)ï¼Œéœ€è¦å­˜å‚¨è¾“å‡ºæ•°æ®
- **å†…å­˜å ç”¨**: çº¦ä¸ºè¾“å…¥æ•°æ®çš„1-2å€

### æ•°å€¼ç²¾åº¦
- **æµ®ç‚¹è¿ç®—**: ä½¿ç”¨åŒç²¾åº¦æµ®ç‚¹æ•°è®¡ç®—
- **é€†å˜æ¢ç²¾åº¦**: å…¸å‹è¯¯å·® < 1e-10
- **è¾¹ç•Œå¤„ç†**: è‡ªåŠ¨å¤„ç†min=maxçš„é€€åŒ–æƒ…å†µ

## ğŸ“¦ ä¾èµ–é¡¹

```txt
numpy>=1.19.0
```

## ğŸ› ï¸ å¼€å‘è¯´æ˜

### æ ¸å¿ƒæ–‡ä»¶
- `model.py`: å®ç°å…·ä½“çš„å½’ä¸€åŒ–ç®—æ³•
- `run.py`: æä¾›æ ‡å‡†åŒ–APIæ¥å£
- `config.json`: ç®—æ³•å‚æ•°é…ç½®
- `meta.json`: ç®—æ³•å…ƒä¿¡æ¯æè¿°

### æµ‹è¯•æ•°æ®
- `make.py`: ç”Ÿæˆå¤šæ ·åŒ–çš„æµ‹è¯•ä¿¡å·
- `data/example_input.npy`: åŒ…å«ä¸åŒç±»å‹ã€ä¸åŒèŒƒå›´çš„æµ‹è¯•ä¿¡å·

### å¯è§†åŒ–è¾“å‡º
è¿è¡Œ`python run.py`ä¼šåœ¨`assets/`ç›®å½•ç”Ÿæˆå½’ä¸€åŒ–æ•ˆæœå¯¹æ¯”å›¾ï¼š
- `å½’ä¸€åŒ–å¯¹æ¯”_0_1.png`: [0,1]èŒƒå›´å½’ä¸€åŒ–å¯¹æ¯”
- `å½’ä¸€åŒ–å¯¹æ¯”_neg1_1.png`: [-1,1]èŒƒå›´å½’ä¸€åŒ–å¯¹æ¯”  
- `å½’ä¸€åŒ–å¯¹æ¯”_0_10.png`: [0,10]èŒƒå›´å½’ä¸€åŒ–å¯¹æ¯”
- `å½’ä¸€åŒ–å¯¹æ¯”_neg5_5.png`: [-5,5]èŒƒå›´å½’ä¸€åŒ–å¯¹æ¯”

è¿è¡Œ`python run.py`æŸ¥çœ‹è¯¦ç»†çš„å½’ä¸€åŒ–æ•ˆæœæ¼”ç¤ºï¼
    "log": "Min-Maxå½’ä¸€åŒ– - fit_transformæ¨¡å¼\n...",
    "success": True
}
```

2. **inverse_transformæ¨¡å¼**ï¼š
```python
{
    "result": recovered_array,       # æ¢å¤çš„åŸå§‹æ•°ç»„
    "metrics": {
        "original_min": -10.5,
        "original_max": 25.3,
        "recovered_min": -10.499,
        "recovered_max": 25.301
    },
    "log": "Min-Maxå½’ä¸€åŒ– - inverse_transformæ¨¡å¼\n...",
    "success": True
}
```

#### ä½¿ç”¨ç¤ºä¾‹

```python
import numpy as np
from run import run

# åŠ è½½æµ‹è¯•æ•°æ®
signal_data = np.load("data/example_input.npy")  # shape: (100, 2, 1000)

# 1. æ ‡å‡†å½’ä¸€åŒ–åˆ°[0,1]
input_data = {
    "signal": signal_data,
    "normalization_range": (0, 1),
    "mode": "fit_transform"
}
result = run(input_data)
print(f"å½’ä¸€åŒ–èŒƒå›´: [{result['result'].min():.4f}, {result['result'].max():.4f}]")

# 2. å½’ä¸€åŒ–åˆ°[-1,1]
input_data = {
    "signal": signal_data,
    "normalization_range": (-1, 1),
    "mode": "fit_transform"
}
result = run(input_data)

# 3. é€†å˜æ¢æ¢å¤åŸå§‹æ•°æ®
input_data = {
    "signal": result['result'],
    "original_min": result['metrics']['original_min'],
    "original_max": result['metrics']['original_max'],
    "mode": "inverse_transform"
}
recovered = run(input_data)
```

### 3. é…ç½®å‚æ•°

å¯ä»¥é€šè¿‡ä¿®æ”¹`config.json`æ–‡ä»¶è°ƒæ•´ç®—æ³•å‚æ•°ï¼š

```json
{
    "default_range": [0, 1],         # é»˜è®¤å½’ä¸€åŒ–èŒƒå›´
    "clip_outliers": false,          # æ˜¯å¦è£å‰ªå¼‚å¸¸å€¼
    "outlier_percentile": 1.0,       # å¼‚å¸¸å€¼ç™¾åˆ†ä½é˜ˆå€¼
    "preserve_zero": false,          # æ˜¯å¦ä¿æŒé›¶å€¼ä¸å˜
    "robust_quantiles": [0.25, 0.75], # é²æ£’å½’ä¸€åŒ–åˆ†ä½æ•°
    "feature_selection": {
        "use_global_norm": true,     # ä½¿ç”¨å…¨å±€å½’ä¸€åŒ–
        "use_channel_norm": false,   # ä½¿ç”¨é€šé“å½’ä¸€åŒ–
        "use_robust_norm": false     # ä½¿ç”¨é²æ£’å½’ä¸€åŒ–
    }
}
```

## ç®—æ³•åŸç†

Min-Maxå½’ä¸€åŒ–ä½¿ç”¨ä»¥ä¸‹å…¬å¼ï¼š

```
X_norm = (X - X_min) / (X_max - X_min) * (range_max - range_min) + range_min
```

å…¶ä¸­ï¼š
- `X`: åŸå§‹æ•°æ®
- `X_min`, `X_max`: åŸå§‹æ•°æ®çš„æœ€å°å€¼å’Œæœ€å¤§å€¼
- `range_min`, `range_max`: ç›®æ ‡èŒƒå›´çš„æœ€å°å€¼å’Œæœ€å¤§å€¼

### æ”¯æŒçš„å½’ä¸€åŒ–æ–¹æ³•

1. **æ ‡å‡†Min-Maxå½’ä¸€åŒ–**ï¼šåŸºäºå…¨å±€æœ€å°å€¼å’Œæœ€å¤§å€¼
2. **é²æ£’å½’ä¸€åŒ–**ï¼šåŸºäºåˆ†ä½æ•°ï¼Œå¯¹å¼‚å¸¸å€¼æ›´ç¨³å¥
3. **ä¿æŒé›¶å€¼å½’ä¸€åŒ–**ï¼šç¡®ä¿é›¶å€¼åœ¨å½’ä¸€åŒ–åä»ä¸ºç‰¹å®šå€¼
4. **æŒ‰è½´å½’ä¸€åŒ–**ï¼šå¯ä»¥æŒ‰æŒ‡å®šè½´è¿›è¡Œå½’ä¸€åŒ–

## æ€§èƒ½ç‰¹ç‚¹

- **æ—¶é—´å¤æ‚åº¦**: O(n)ï¼Œå…¶ä¸­nä¸ºæ•°æ®ç‚¹æ•°é‡
- **ç©ºé—´å¤æ‚åº¦**: O(n)
- **å®æ—¶æ€§**: æ”¯æŒå®æ—¶å¤„ç†
- **å¯é€†æ€§**: æ”¯æŒå®Œå…¨å¯é€†çš„é€†å˜æ¢
- **æ•°å€¼ç¨³å®šæ€§**: å¤„ç†äº†é™¤é›¶ç­‰è¾¹ç•Œæƒ…å†µ

## åº”ç”¨åœºæ™¯

1. **æœºå™¨å­¦ä¹ é¢„å¤„ç†**: ä¸ºç®—æ³•æä¾›æ ‡å‡†åŒ–è¾“å…¥
2. **ä¿¡å·å¤„ç†**: å°†ä¿¡å·å¹…åº¦æ ‡å‡†åŒ–åˆ°ç‰¹å®šèŒƒå›´
3. **æ•°æ®å¯è§†åŒ–**: å°†æ•°æ®æ˜ å°„åˆ°æ˜¾ç¤ºèŒƒå›´
4. **ç‰¹å¾å·¥ç¨‹**: ç»Ÿä¸€ä¸åŒç‰¹å¾çš„æ•°å€¼èŒƒå›´
5. **ç¥ç»ç½‘ç»œ**: åŠ é€Ÿæ”¶æ•›ï¼Œæé«˜è®­ç»ƒç¨³å®šæ€§

## æ³¨æ„äº‹é¡¹

1. Min-Maxå½’ä¸€åŒ–å¯¹å¼‚å¸¸å€¼æ•æ„Ÿï¼Œæå€¼ä¼šå½±å“æ•´ä½“ç¼©æ”¾
2. å½“æ•°æ®åˆ†å¸ƒå‘ç”Ÿå˜åŒ–æ—¶ï¼Œéœ€è¦é‡æ–°è®¡ç®—å½’ä¸€åŒ–å‚æ•°
3. å¯¹äºæµ‹è¯•æ•°æ®ï¼Œåº”ä½¿ç”¨è®­ç»ƒæ•°æ®çš„å½’ä¸€åŒ–å‚æ•°
4. å¦‚æœæœ€å¤§å€¼ç­‰äºæœ€å°å€¼ï¼Œç®—æ³•ä¼šè¿”å›ä¸­é—´å€¼é¿å…é™¤é›¶é”™è¯¯
5. é€†å˜æ¢éœ€è¦ä¿å­˜åŸå§‹çš„æœ€å°å€¼å’Œæœ€å¤§å€¼å‚æ•°
